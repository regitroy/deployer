(this.webpackJsonpredux_sample=this.webpackJsonpredux_sample||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),s=a.n(o),c=(a(72),a(73),a(74),a(13)),i=a(14),l=a(16),u=a(15),d=a(28),p="INC",m="DESC",h="GET",E="SHOW_CREATE_TASK_MODAL",f="HIDE_CREATE_TASK_MODAL",y="SET_DEPLOYMENT_TYPE",b="ADD_DEPLOYMENT_HISTORY",O="RESET_DEPLOYMENT_HISTORY",v="DELETE_DEPLOYMENT_HISTORY",g={inc:function(e){return{type:p,by:e}},desc:function(e){return{type:m,by:e}},get:function(){return{type:h}}},D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetch()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.incr},"+")," ",this.props.count," ",r.a.createElement("button",{onClick:this.props.desc},"-"))}}]),a}(r.a.Component);Object(d.b)((function(e){return{count:e.mathOps.count}}),(function(e){return{incr:function(){e(g.inc(2))},desc:function(){e(g.desc(2))},fetch:function(){e(g.get())}}}))(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var j=a(27),w=a(6),T={count:0},C=a(64),M={showCreateModal:!1,deployments:[],histories:[]},H=Object(j.b)({mathOps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(w.a)(Object(w.a)({},e),{count:e.count+1});case m:return Object(w.a)(Object(w.a)({},e),{count:e.count-1});case h:default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(w.a)(Object(w.a)({},e),{showCreateModal:!0});case f:return Object(w.a)(Object(w.a)({},e),{showCreateModal:!1});case y:return Object(w.a)(Object(w.a)({},e),{deployments:t.data});case b:return Object(w.a)(Object(w.a)({},e),{histories:[].concat(Object(C.a)(e.histories),[t.data])});case O:return Object(w.a)(Object(w.a)({},e),{histories:t.data});case v:var a=e.histories.filter((function(e){return e._id!=t.id}));return Object(w.a)(Object(w.a)({},e),{histories:a});default:return e}}}),_=Object(j.c)(H),S=a(63),k=a(8),N=a(25),L=a(107),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(L.a,{bg:"primary",variant:"dark"},r.a.createElement(L.a.Brand,{href:"#home"},"Deployer"))}}]),a}(n.Component),I=a(105),R=a(103),Y=a(104),A=a(62),B=a(106),G=a(109),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).setModalShow=function(){n.props.onCreateModelHide()},n.setUrl=function(e){e.target.value&&n.setState({createNewData:Object(w.a)(Object(w.a)({},n.state.createNewData),{url:e.target.value})})},n.setVersion=function(e){e.target.value&&n.setState({createNewData:Object(w.a)(Object(w.a)({},n.state.createNewData),{version:e.target.value})})},n.setVersionOptions=function(e){var t=e.target.value,a=n.props.deploymentData.filter((function(e){return e._id==t}));0!=a.length&&n.setState({versions:a[0].versions,createNewData:Object(w.a)(Object(w.a)({},n.state.createNewData),{templete:e.target.value})})},n.onFormSubmit=function(){n.props.createHistory(n.state.createNewData),n.props.onCreateModelHide()},n.state={modalShow:!1,versions:[],createNewData:{templete:"",url:"",version:""}},n}return Object(i.a)(a,[{key:"modal",value:function(){var e=this;return r.a.createElement(I.a,{show:this.props.show,onHide:function(){return e.setModalShow(!1)},"aria-labelledby":"contained-modal-title-vcenter"},r.a.createElement(I.a.Header,{closeButton:!0},r.a.createElement(I.a.Title,{id:"contained-modal-title-vcenter"},"Create New Deployment")),r.a.createElement(I.a.Body,{className:"show-grid"},r.a.createElement(R.a,null,r.a.createElement(Y.a,null,r.a.createElement(A.a,null,r.a.createElement(B.a.Group,{controlId:"formBasicEmail"},r.a.createElement(B.a.Label,null,"URL"),r.a.createElement(B.a.Control,{type:"text",placeholder:"Enter url",onKeyUp:this.setUrl})),r.a.createElement(B.a.Group,{controlId:"formBasicPassword"},r.a.createElement(B.a.Label,null,"Templete Name"),r.a.createElement(B.a.Control,{as:"select",defaultValue:"Choose...",onChange:this.setVersionOptions},r.a.createElement("option",null,"Choose..."),this.props.deploymentData.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))),r.a.createElement(B.a.Group,{controlId:"formBasicPassword"},r.a.createElement(B.a.Label,null,"Version"),r.a.createElement(B.a.Control,{as:"select",defaultValue:"Choose...",onChange:this.setVersion},r.a.createElement("option",null,"Choose..."),this.state.versions.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(G.a,{variant:"primary",type:"submit",onClick:this.onFormSubmit},"Submit"))))))}},{key:"render",value:function(){return this.modal()}}]),a}(n.Component),V=a(110),U=a(108),W=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).random=function(e,t){return Math.floor(Math.random()*t)+e},n.onDelete=function(e){n.props.onDelete(e)},n.state={progress:0,finishedProgress:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(this.props.newAddition){this.setState({progress:0,finishedProgress:!1});var e=this;setInterval((function(){var t=!1,a=e.state.progress+e.random(1,10);a>=100&&(t=!0),e.setState({progress:a,finishedProgress:t})}),400)}else this.setState({progress:0,finishedProgress:!0})}},{key:"loader",value:function(){return r.a.createElement("div",null,r.a.createElement(V.a,{animated:!0,now:this.state.progress}))}},{key:"render",value:function(){var e=this,t=this.props.data;return r.a.createElement(A.a,{md:"4",style:{marginBottom:20}},r.a.createElement(U.a,null,r.a.createElement(U.a.Body,null,r.a.createElement(U.a.Title,null,t.name),r.a.createElement(U.a.Text,null," Version: ",t.version),r.a.createElement(U.a.Text,null,"Date: ",t.create_date),this.state.finishedProgress?r.a.createElement("p",null,r.a.createElement(G.a,{variant:"danger",onClick:function(){return e.onDelete(t._id)}},"Delete")):this.loader())))}}]),a}(n.Component),F={showModal:function(){return{type:E}},hideModal:function(){return{type:f}},setDeploymentType:function(e){return{type:y,data:e}},setHistory:function(e){return{type:O,data:e}},addHistory:function(e){return{type:b,data:e}},deleteHistory:function(e){return{type:v,id:e}}},K=a(30),z=a.n(K),J=a(24);z.a.defaults.baseURL="https://morning-taiga-49889.herokuapp.com",z.a.defaults.headers.common.Authorization=localStorage.getItem("token"),z.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var $={LOGIN:"/login",REGISTER:"/register",GET_DEPLOYMENT:"/deployment",GET_HISTORY:"/deployment/history",CREATE_DEPLOYMENT:"/deployment",DELETE_DEPLOYMENT:"/deployment/delete"},q={post:function(e,t,a){z.a.post(e,t).then((function(e){e.data.success?a(e.data.data):J.b.error(e.data.message)})).catch((function(e){console.log("ERROR -> ",e),Object(J.b)("Something went wrong.")}))},get:function(e,t){z.a.get(e).then((function(e){e.data.success?t(e.data.data):J.b.error(e.data.message)})).catch((function(e){Object(J.b)("Something went wrong.")}))},success:function(e){J.b.success(e)}},Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getHistory=function(){q.get($.GET_HISTORY,(function(e){n.props.resetHistory(e)}))},n.createHistory=function(e){Object(N.a)(n);q.post($.CREATE_DEPLOYMENT,e,function(e){console.log("THIS -> ",this.props),q.success("Created new deployment."),e.newAdded=!0,this.props.addHistory(e)}.bind(Object(N.a)(n)))},n.onDelete=function(e){Object(N.a)(n);q.post($.DELETE_DEPLOYMENT,{historyId:e},function(e){q.success("History deleted.")}.bind(Object(N.a)(n))),n.props.onDelete(e)},n}return Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=this;q.get($.GET_DEPLOYMENT,(function(t){e.props.setDeployData(t)})),this.getHistory()}},{key:"card",value:function(){var e=this;return r.a.createElement(U.a,null,r.a.createElement(U.a.Header,{as:"h5"},"Deploying ",r.a.createElement(G.a,{onClick:this.props.showCreateTaskModal,style:{fontSize:11}},"Create New")),r.a.createElement(U.a.Body,null,0==this.props.historyData.length?r.a.createElement(U.a.Title,null,"No Deployment"):"",r.a.createElement(Y.a,null,this.props.historyData.map((function(t){return r.a.createElement(W,{key:t._id,newAddition:t.newAdded,data:t,onDelete:e.onDelete})})))))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement("br",null),r.a.createElement(R.a,null,r.a.createElement(Y.a,null,r.a.createElement(A.a,null,this.card()))),r.a.createElement(x,{show:this.props.showCreateModal,onCreateModelHide:this.props.onCreateModelHide,deploymentData:this.props.deploymentData,createHistory:this.createHistory}))}}]),a}(n.Component),X=Object(d.b)((function(e){return{showCreateModal:e.dashboard.showCreateModal,deploymentData:e.dashboard.deployments,historyData:e.dashboard.histories}}),(function(e){return{showCreateTaskModal:function(){e(F.showModal())},onCreateModelHide:function(){e(F.hideModal())},setDeployData:function(t){e(F.setDeploymentType(t))},addHistory:function(t){e(F.addHistory(t))},resetHistory:function(t){e(F.setHistory(t))},onDelete:function(t){e(F.deleteHistory(t))}}}))(Q);n.Component,a(97),a(98);s.a.render(r.a.createElement(d.a,{store:_},r.a.createElement("div",null,r.a.createElement(J.a,null)),r.a.createElement(S.a,null,r.a.createElement(k.c,null,r.a.createElement("div",null,r.a.createElement(k.a,{path:"/"},r.a.createElement(X,null)))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,a){e.exports=a(100)},72:function(e,t,a){},73:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},74:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.7a2b7d4b.chunk.js.map